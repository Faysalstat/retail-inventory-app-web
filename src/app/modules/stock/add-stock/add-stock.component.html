<mat-card>
    <h1>Create Suuply Invoice:</h1>
    <div class="row">
        <h2 style="font-weight:bold;">
            <mat-icon>face</mat-icon> SUPPLYER
        </h2>
        <app-page-loader *ngIf="showLoader"></app-page-loader>
        <div class="col-md-3">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Code:</mat-label>
                <input (change)="searchSupllyer()" pInputText [ngModelOptions]="{standalone:true}" [disabled]="isEdit"
                    [(ngModel)]="supplyer.code" placeholder="Code" matInput>
            </mat-form-field>
        </div>
    </div>
    <div *ngIf="isSupplyerExist" class="row">
        <div class="col-md-6">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Supplyer :</th>
                        <td>{{supplyer?.companyName}}</td>
                    </tr>
                    <tr>
                        <th>Shop Name :</th>
                        <td>{{supplyer?.shopName}}</td>
                    </tr>
                    <tr>
                        <th>Address :</th>
                        <td>{{supplyer?.person?.personAddress}}</td>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="col-md-6">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Balance :</th>
                        <th>{{supplyer?.account?.balance}} BDT</th>
                    </tr>
                </thead>
            </table>
        </div>
        <!-- <div class="col-md-3">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Mobile No:</mat-label>
                <input pInputText [ngModelOptions]="{standalone:true}" [disabled]="isEdit"
                    [(ngModel)]="person.contactNo" placeholder="Contact No" matInput>
            </mat-form-field>
        </div> -->
        <!-- <div class="col-md-3">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Company Name:</mat-label>
                <input [ngModelOptions]="{standalone:true}" [(ngModel)]="supplyer.companyName" [disabled]="isSupplyerExist"
                    placeholder="Company Name" matInput>
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Shop Name:</mat-label>
                <input [ngModelOptions]="{standalone:true}" [(ngModel)]="supplyer.shopName" [disabled]="isSupplyerExist"
                    placeholder="Shop Name" matInput>
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Reg No:</mat-label>
                <input [ngModelOptions]="{standalone:true}" [(ngModel)]="supplyer.regNo" [disabled]="isSupplyerExist"
                    placeholder="Reg No." matInput>
            </mat-form-field>
        </div>
        <div class="col-md-12">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Address:</mat-label>
                <textarea pInputText [ngModelOptions]="{standalone:true}" [disabled]="isSupplyerExist"
                    [(ngModel)]="person.personAddress" matInput></textarea>
            </mat-form-field>
        </div> -->
        <!-- <div class="col-md-12">
            <button *ngIf="!isSupplyerExist" (click)="addSupplyer()" mat-raised-button color="warn">Add
                Supplyer</button>
        </div> -->
        <p style="color:red;font-weight:bolder">{{errMsg}}</p>
    </div>
    <hr>

    <div class="row">
        <h2 style="font-weight:bold;">
            <mat-icon>shopping_cart</mat-icon> ORDER
        </h2>
        <div class="col-md-12">
            <form>
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Select Product</mat-label>
                <input type="text" matInput [formControl]="productName" [matAutocomplete]="auto">
                <mat-autocomplete (optionSelected)="productSelected($event)" #auto="matAutocomplete" [displayWith]="displayFn">
                    <mat-option *ngFor="let product of filteredOptions | async" [value]="product">
                        {{product.productName}}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>
            </form>
        </div>
        <div class="col-md-2">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Buying Price Rate</mat-label>
                <input pInputText [ngModelOptions]="{standalone:true}" (change)="calculateOrder()"
                    [(ngModel)]="orderItem.pricePerUnit" placeholder="Selling Price" matInput>
            </mat-form-field>
        </div>
        <div class="col-md-2">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Unit Per Package</mat-label>
                <input type="number" pInputText [ngModelOptions]="{standalone:true}" [disabled]="true"
                     [(ngModel)]="orderItem.unitPerPackage" placeholder="Quantity/Pakage" matInput>
            </mat-form-field>
        </div>
        <div class="col-md-2">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Package Quantity</mat-label>
                <input type="number" pInputText [ngModelOptions]="{standalone:true}" [disabled]="isEdit"
                    (change)="calculateQuantity()" [(ngModel)]="orderItem.packageQuantity" placeholder="Quantity" matInput>
            </mat-form-field>
        </div>
        <div class="col-md-2">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Loose Quantity</mat-label>
                <input type="number" pInputText [ngModelOptions]="{standalone:true}" [disabled]="isEdit"
                    (change)="calculateQuantity()" [(ngModel)]="orderItem.looseQuantity" placeholder="Quantity" matInput>
            </mat-form-field>
        </div>
        <div class="col-md-2">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Total Quantity</mat-label>
                <input type="number" pInputText [ngModelOptions]="{standalone:true}" [disabled]="isEdit"
                    (change)="calculateOrder()" [(ngModel)]="orderItem.quantityOrdered" placeholder="Quantity" matInput>
            </mat-form-field>
        </div>
        <!-- <div class="col-md-1">
                    <h3 style="font-weight:bold;margin-top:8px;">{{unitType}}</h3>
                </div> -->
        <div class="col-md-2">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Total Price (BDT)</mat-label>
                <input type="number" pInputText [ngModelOptions]="{standalone:true}" [disabled]="isEdit"
                    [(ngModel)]="orderItem.totalOrderPrice" placeholder="Selling Price" matInput>
            </mat-form-field>
        </div>
        <div class="col-md-12">
            <button (click)="addSupplyOrder()" mat-raised-button color="warn">Add
                Order</button>
        </div>
    </div>
    <div class="row">
        <hr class="mt-3">
        <div class="col-md-12 mt-3">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>SN</th>
                        <th>Product Name</th>
                        <th>Rate</th>
                        <th>Package</th>
                        <th>Loose</th>
                        <th>Total Quantity</th>
                        <th>Total Price</th>
                        <!-- <th>Action</th> -->
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let order of orderList; index as i">
                        <th scope="row">{{i+1}}</th>
                        <th>{{order.productName}}</th>
                        <th>{{order.pricePerUnit}}</th>
                        <th>{{order.packageQuantity}}</th>
                        <th>{{order.looseQuantity}}</th>
                        <th>{{order.quantityOrdered}}</th>
                        <th>{{order.totalOrderPrice}}</th>
                        <!-- <th>{{order.totalPrice}}</th> -->
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="5"></th>
                        <th>Total</th>
                        <th>{{totalPrice}} BDT</th>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class="col-md-12">
            <mat-form-field class="input-field" appearance="outline">
                <mat-label>Comment:</mat-label>
                <textarea type="text" pInputText [ngModelOptions]="{standalone:true}" 
                [(ngModel)]="comment" matInput></textarea>
            </mat-form-field>
        </div>
        <div class="col-md-12">
            <button style="float:right ;" (click)="submitOrder()" mat-raised-button color="warn">Submit</button>
        </div>
    </div>
    <!-- <form [formGroup]="supplyInvoiceIssueForm" (keydown.enter)="$event.preventDefault()">
        <div class="row mt-3">
            <h2 style="font-weight:bold;">
                <mat-icon>receipt</mat-icon> SUMMARY
            </h2>
            <hr class="mt-3">
            <div class="col-md-3">
                <mat-form-field class="input-field" appearance="outline">
                    <mat-label>Total Price:</mat-label>
                    <input formControlName="totalPrice" (keyup)="calculateSummary()" [disabled]="isEdit"
                        placeholder="Total Price" matInput>
                </mat-form-field>
            </div>

            <div class="col-md-3">
                <mat-form-field class="input-field" appearance="outline">
                    <mat-label>Paid:</mat-label>
                    <input formControlName="amountPaid" (keyup)="calculateSummary()" [disabled]="isEdit"
                        placeholder="Paid Amount" matInput>
                </mat-form-field>
            </div> -->
            <!-- <div class="col-md-3">
                <mat-form-field class="input-field" appearance="outline">
                    <mat-label>Due:</mat-label>
                    <input formControlName="duePayment" [disabled]="isEdit" placeholder="Due Amount" matInput>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field class="input-field" appearance="outline">
                    <mat-label>Rebate:</mat-label>
                    <input formControlName="rebate" (keyup)="calculateSummary()" [disabled]="isEdit"
                        placeholder="Rebate" matInput>
                </mat-form-field>
            </div>
            
            <div class="col-md-12">
                <mat-form-field class="input-field" appearance="outline">
                    <mat-label>Comment:</mat-label>
                    <textarea type="text" pInputText formControlName="comment" matInput></textarea>
                </mat-form-field>
            </div>
            <div class="col-md-12">
                <button (click)="submitOrder()" mat-raised-button color="warn">Submit</button>
            </div>
        </div>
    </form> -->
</mat-card>